import{K as _,r as o,p as R,j as e,N as y,C as a,F as u,I as x,B as j}from"./index-B2pVN_Qi.js";import{R as C,C as D,T as A}from"./generateCategoricalChart-Dfmfd21p.js";import{P as I,a as T,b as k,c as J}from"./PieChart-q5pleo0x.js";import{T as O}from"./trash-2-DXQwH-v3.js";function L(){const{user:m}=_(),[n,f]=o.useState("dashboard"),[l,p]=o.useState(R),[g,b]=o.useState(null),[t,i]=o.useState({title:"",price:0,address:"",city:"",state:"",bedrooms:0,bathrooms:0,listing_type:"rent"});if(!m||m.email!=="admin@choiceproperties.com")return e.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[e.jsx(y,{}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs(a,{className:"p-8 max-w-md text-center border-2 border-red-300",children:[e.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600",children:"You don't have permission to access the admin panel."})]})}),e.jsx(u,{})]});const r=o.useMemo(()=>{const s=l.filter(d=>d.listing_type==="rent").length,c=l.filter(d=>d.listing_type==="buy").length,h=JSON.parse(localStorage.getItem("choiceProperties_reviews")||"[]"),S=JSON.parse(localStorage.getItem("choiceProperties_users")||"[]");return{totalProperties:l.length,rentals:s,sales:c,totalReviews:h.length,pendingReviews:0,totalUsers:S.length,avgRating:h.length>0?(h.reduce((d,P)=>d+P.rating,0)/h.length).toFixed(1):0}},[l]),N=[{name:"Rentals",value:r.rentals,fill:"#3b82f6"},{name:"Sales",value:r.sales,fill:"#10b981"}],v=s=>{p(l.filter(c=>c.id!==s))},w=()=>{if(g)p(l.map(s=>s.id===g.id?g:s)),b(null);else if(t.title&&t.address){const s={id:`prop_${Date.now()}`,owner_id:"admin",owner:{id:"admin",name:"Admin",slug:"admin",profile_photo_url:"",email:"admin@choiceproperties.com",verified:!0,description:"Admin",created_at:new Date().toISOString()},title:t.title,price:t.price,address:t.address,city:t.city,state:t.state,zip:"00000",bedrooms:t.bedrooms,bathrooms:t.bathrooms,sqft:0,year_built:new Date().getFullYear(),description:"",features:[],type:"House",location:t.city,images:[],featured:!1,listing_type:t.listing_type,status:"available"};p([...l,s]),i({title:"",price:0,address:"",city:"",state:"",bedrooms:0,bathrooms:0,listing_type:"rent"})}};return e.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[e.jsx(y,{}),e.jsx("div",{className:"bg-gradient-to-r from-primary to-secondary text-white py-8",children:e.jsxs("div",{className:"container mx-auto px-4 flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Admin Dashboard"}),e.jsxs("span",{className:"text-white/80",children:["Welcome, ",m?.name,"!"]})]})}),e.jsxs("div",{className:"container mx-auto px-4 py-8 flex-1",children:[e.jsx("div",{className:"flex gap-2 mb-8 flex-wrap",children:[{id:"dashboard",label:"Dashboard",icon:"üìä"},{id:"properties",label:"Properties",icon:"üè†"},{id:"users",label:"Users",icon:"üë•"},{id:"reviews",label:"Reviews",icon:"‚≠ê"},{id:"settings",label:"Settings",icon:"‚öôÔ∏è"}].map(s=>e.jsxs("button",{onClick:()=>f(s.id),className:`px-4 py-2 rounded font-semibold transition-all ${n===s.id?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[s.icon," ",s.label]},s.id))}),n==="dashboard"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(a,{className:"p-6 border-t-4 border-t-blue-500",children:[e.jsx("p",{className:"text-gray-600 text-sm font-semibold",children:"Total Properties"}),e.jsx("p",{className:"text-3xl font-bold text-primary",children:r.totalProperties})]}),e.jsxs(a,{className:"p-6 border-t-4 border-t-green-500",children:[e.jsx("p",{className:"text-gray-600 text-sm font-semibold",children:"For Rent"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:r.rentals})]}),e.jsxs(a,{className:"p-6 border-t-4 border-t-amber-500",children:[e.jsx("p",{className:"text-gray-600 text-sm font-semibold",children:"For Sale"}),e.jsx("p",{className:"text-3xl font-bold text-amber-600",children:r.sales})]}),e.jsxs(a,{className:"p-6 border-t-4 border-t-purple-500",children:[e.jsx("p",{className:"text-gray-600 text-sm font-semibold",children:"Total Users"}),e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:r.totalUsers})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs(a,{className:"p-6",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"Listing Breakdown"}),e.jsx(C,{width:"100%",height:300,children:e.jsxs(I,{children:[e.jsx(T,{data:N,cx:"50%",cy:"50%",labelLine:!1,label:{position:"insideBottomRight",offset:-10},outerRadius:80,fill:"#8884d8",dataKey:"value",children:N.map((s,c)=>e.jsx(D,{fill:s.fill},`cell-${c}`))}),e.jsx(A,{})]})})]}),e.jsxs(a,{className:"p-6",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"Reviews & Ratings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm font-semibold",children:"Total Reviews"}),e.jsx("p",{className:"text-3xl font-bold",children:r.totalReviews})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm font-semibold",children:"Average Rating"}),e.jsxs("p",{className:"text-3xl font-bold text-yellow-500",children:[r.avgRating," ‚≠ê"]})]})]})]})]})]}),n==="properties"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(a,{className:"p-6 bg-blue-50",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"Add New Property"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(x,{placeholder:"Title",value:t.title,onChange:s=>i({...t,title:s.target.value})}),e.jsx(x,{type:"number",placeholder:"Price",value:t.price,onChange:s=>i({...t,price:parseInt(s.target.value)})}),e.jsx(x,{placeholder:"Address",value:t.address,onChange:s=>i({...t,address:s.target.value})}),e.jsx(x,{placeholder:"City",value:t.city,onChange:s=>i({...t,city:s.target.value})}),e.jsx(x,{placeholder:"State",value:t.state,onChange:s=>i({...t,state:s.target.value})}),e.jsxs("select",{value:t.listing_type,onChange:s=>i({...t,listing_type:s.target.value}),className:"px-3 py-2 border rounded",children:[e.jsx("option",{value:"rent",children:"Rent"}),e.jsx("option",{value:"buy",children:"Buy"}),e.jsx("option",{value:"sell",children:"Sell"})]})]}),e.jsxs(j,{onClick:w,className:"mt-4 bg-primary",children:[e.jsx(k,{className:"h-4 w-4 mr-2"})," Add Property"]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-lg mb-4",children:["All Properties (",l.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto",children:l.map(s=>e.jsxs(a,{className:"p-4 flex justify-between items-center hover:bg-gray-50",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:s.title}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.address,", ",s.city]}),e.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:s.listing_type})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>b(s),children:e.jsx(J,{className:"h-4 w-4"})}),e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>v(s.id),children:e.jsx(O,{className:"h-4 w-4 text-red-600"})})]})]},s.id))})]})]}),n==="users"&&e.jsxs(a,{className:"p-6",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"Registered Users"}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Name"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Email"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Joined"})]})}),e.jsx("tbody",{children:JSON.parse(localStorage.getItem("choiceProperties_users")||"[]").map(s=>e.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 font-semibold",children:s.name}),e.jsx("td",{className:"px-4 py-2",children:s.email}),e.jsx("td",{className:"px-4 py-2 text-gray-600",children:new Date(s.created_at).toLocaleDateString()})]},s.id))})]}),JSON.parse(localStorage.getItem("choiceProperties_users")||"[]").length===0&&e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No users yet"})]})]}),n==="reviews"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Property Reviews"}),JSON.parse(localStorage.getItem("choiceProperties_reviews")||"[]").map(s=>e.jsxs(a,{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:s.user_name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Property ID: ",s.property_id]})]}),e.jsx("span",{className:"text-yellow-500",children:"‚≠ê".repeat(s.rating)})]}),e.jsx("p",{className:"text-gray-700",children:s.comment}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:new Date(s.created_at).toLocaleDateString()})]},s.id)),JSON.parse(localStorage.getItem("choiceProperties_reviews")||"[]").length===0&&e.jsx("p",{className:"text-gray-500",children:"No reviews yet"})]}),n==="settings"&&e.jsxs(a,{className:"p-6 max-w-md",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"Admin Settings"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[e.jsx("span",{className:"font-semibold",children:"Admin User"}),e.jsx("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded text-sm",children:"Connected"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[e.jsx("span",{className:"font-semibold",children:"Email"}),e.jsx("span",{className:"text-gray-600",children:m?.email})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[e.jsx("span",{className:"font-semibold",children:"Data Storage"}),e.jsx("span",{className:"text-gray-600",children:"localStorage"})]})]})]})]}),e.jsx(u,{})]})}export{L as default};
