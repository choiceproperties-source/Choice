import{K as P,b as I,r as c,p as A,j as e,N as M,B as o,W as V,C as n,I as d,G as g,F as B}from"./index-B2pVN_Qi.js";import{b as T,c as k,P as q,a as F}from"./PieChart-q5pleo0x.js";import{T as R}from"./trash-2-DXQwH-v3.js";import{R as j,T as f,B as v,C as K}from"./generateCategoricalChart-Dfmfd21p.js";import{B as z}from"./BarChart-l_nopUbn.js";import{C as O,X as $,Y as E}from"./YAxis-JToOIsg2.js";function Q(){const{user:a,logout:N,isLoggedIn:y}=P(),[,w]=I(),[m,C]=c.useState("listings"),[i,b]=c.useState(A),[Y,L]=c.useState(null),[S,p]=c.useState(!1),[t,l]=c.useState({title:"",address:"",city:"",state:"",price:0,bedrooms:1,bathrooms:1,listing_type:"rent"});if(!y||!a)return w("/login"),null;const h=c.useMemo(()=>i.map(s=>({title:s.title.substring(0,20),views:Math.floor(Math.random()*500)+50,inquiries:Math.floor(Math.random()*30)+5,id:s.id})),[i]),x={activeListings:i.length,totalViews:h.reduce((s,r)=>s+r.views,0),totalInquiries:h.reduce((s,r)=>s+r.inquiries,0),avgViewsPerListing:Math.round(h.reduce((s,r)=>s+r.views,0)/Math.max(i.length,1))},u=[{name:"For Rent",value:i.filter(s=>s.listing_type==="rent").length,fill:"#3b82f6"},{name:"For Sale",value:i.filter(s=>s.listing_type==="buy").length,fill:"#10b981"},{name:"Selling",value:i.filter(s=>s.listing_type==="sell").length,fill:"#f59e0b"}],_=()=>{if(!t.title||!t.address)return;const s={id:`prop_${Date.now()}`,owner_id:a.id,owner:{id:a.id,name:a.name,slug:a.name.toLowerCase().replace(/\s+/g,"-"),profile_photo_url:"",email:a.email,verified:!1,description:"",created_at:new Date().toISOString()},title:t.title,price:t.price,address:t.address,city:t.city,state:t.state,zip:"00000",bedrooms:t.bedrooms,bathrooms:t.bathrooms,sqft:0,year_built:new Date().getFullYear(),description:"",features:[],type:"House",location:t.city,images:[],featured:!1,listing_type:t.listing_type,status:"available"};b([...i,s]),l({title:"",address:"",city:"",state:"",price:0,bedrooms:1,bathrooms:1,listing_type:"rent"}),p(!1)},D=s=>{b(i.filter(r=>r.id!==s))};return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[e.jsx(M,{}),e.jsx("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white py-12",children:e.jsxs("div",{className:"container mx-auto px-4 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold",children:"Property Manager Dashboard"}),e.jsx("p",{className:"text-white/80 mt-2",children:"Manage your listings and track performance"})]}),e.jsxs(o,{onClick:N,variant:"ghost",className:"text-white hover:bg-white/20",children:[e.jsx(V,{className:"h-5 w-5 mr-2"}),"Sign Out"]})]})}),e.jsx("div",{className:"container mx-auto px-4 -mt-8 relative z-10",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(n,{className:"p-4 bg-white",children:[e.jsx("p",{className:"text-gray-600 text-sm font-semibold",children:"Active Listings"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:x.activeListings})]}),e.jsxs(n,{className:"p-4 bg-white",children:[e.jsx("p",{className:"text-gray-600 text-sm font-semibold",children:"Total Views"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:x.totalViews})]}),e.jsxs(n,{className:"p-4 bg-white",children:[e.jsx("p",{className:"text-gray-600 text-sm font-semibold",children:"Inquiries"}),e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:x.totalInquiries})]}),e.jsxs(n,{className:"p-4 bg-white",children:[e.jsx("p",{className:"text-gray-600 text-sm font-semibold",children:"Avg Views/Listing"}),e.jsx("p",{className:"text-3xl font-bold text-orange-600",children:x.avgViewsPerListing})]})]})}),e.jsxs("div",{className:"container mx-auto px-4 mt-12 flex-1",children:[e.jsx("div",{className:"flex gap-2 mb-8 flex-wrap border-b",children:[{id:"listings",label:"My Listings",icon:"ðŸ "},{id:"performance",label:"Performance",icon:"ðŸ“Š"},{id:"profile",label:"Profile",icon:"ðŸ‘¤"}].map(s=>e.jsxs("button",{onClick:()=>C(s.id),className:`px-4 py-3 font-semibold transition-all border-b-2 ${m===s.id?"border-b-green-600 text-green-600":"border-b-transparent text-gray-600 hover:text-gray-900"}`,children:[s.icon," ",s.label]},s.id))}),m==="listings"&&e.jsxs("div",{className:"space-y-6 pb-12",children:[S?e.jsxs(n,{className:"p-6 bg-green-50 border-green-200",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"Create New Listing"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(d,{placeholder:"Property Title",value:t.title,onChange:s=>l({...t,title:s.target.value})}),e.jsx(d,{placeholder:"Address",value:t.address,onChange:s=>l({...t,address:s.target.value})}),e.jsx(d,{placeholder:"City",value:t.city,onChange:s=>l({...t,city:s.target.value})}),e.jsx(d,{placeholder:"State",value:t.state,onChange:s=>l({...t,state:s.target.value})}),e.jsx(d,{type:"number",placeholder:"Price",value:t.price,onChange:s=>l({...t,price:parseInt(s.target.value)})}),e.jsx(d,{type:"number",placeholder:"Bedrooms",value:t.bedrooms,onChange:s=>l({...t,bedrooms:parseInt(s.target.value)})}),e.jsx(d,{type:"number",placeholder:"Bathrooms",value:t.bathrooms,onChange:s=>l({...t,bathrooms:parseInt(s.target.value)})}),e.jsxs("select",{value:t.listing_type,onChange:s=>l({...t,listing_type:s.target.value}),className:"px-3 py-2 border rounded",children:[e.jsx("option",{value:"rent",children:"For Rent"}),e.jsx("option",{value:"buy",children:"For Sale"}),e.jsx("option",{value:"sell",children:"Selling"})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx(o,{onClick:_,className:"bg-green-600",children:"Create Listing"}),e.jsx(o,{onClick:()=>p(!1),variant:"outline",children:"Cancel"})]})]}):e.jsxs(o,{onClick:()=>p(!0),className:"bg-green-600",children:[e.jsx(T,{className:"h-4 w-4 mr-2"})," Add New Listing"]}),e.jsx("div",{className:"grid gap-4",children:i.map(s=>e.jsx(n,{className:"p-6 hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900",children:s.title}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[s.address,", ",s.city,", ",s.state]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsxs(g,{className:"bg-green-100 text-green-800",children:["$",s.price?.toLocaleString()]}),e.jsx(g,{className:s.listing_type==="rent"?"bg-blue-100 text-blue-800":"bg-amber-100 text-amber-800",children:s.listing_type==="rent"?"ðŸ”‘ Rent":s.listing_type==="buy"?"ðŸ  Buy":"ðŸ“ Sell"}),e.jsxs(g,{className:"bg-purple-100 text-purple-800",children:[s.bedrooms," bed â€¢ ",s.bathrooms," bath"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>L(s),children:e.jsx(k,{className:"h-4 w-4"})}),e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>D(s.id),children:e.jsx(R,{className:"h-4 w-4 text-red-600"})})]})]})},s.id))})]}),m==="performance"&&e.jsx("div",{className:"space-y-8 pb-12",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs(n,{className:"p-6",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"Views & Inquiries by Listing"}),e.jsx(j,{width:"100%",height:300,children:e.jsxs(z,{data:h.slice(0,5),children:[e.jsx(O,{strokeDasharray:"3 3"}),e.jsx($,{dataKey:"title"}),e.jsx(E,{}),e.jsx(f,{}),e.jsx(v,{dataKey:"views",fill:"#3b82f6",name:"Views"}),e.jsx(v,{dataKey:"inquiries",fill:"#10b981",name:"Inquiries"})]})})]}),e.jsxs(n,{className:"p-6",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"Listing Type Distribution"}),e.jsx(j,{width:"100%",height:300,children:e.jsxs(q,{children:[e.jsx(F,{data:u,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"value",children:u.map((s,r)=>e.jsx(K,{fill:s.fill},`cell-${r}`))}),e.jsx(f,{})]})})]})]})}),m==="profile"&&e.jsx("div",{className:"max-w-2xl pb-12",children:e.jsxs(n,{className:"p-8",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8 pb-8 border-b",children:[e.jsx("div",{className:"h-16 w-16 rounded-full bg-gradient-to-br from-green-600 to-emerald-600 flex items-center justify-center text-white text-2xl font-bold",children:a?.name?.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:a?.name}),e.jsx("p",{className:"text-gray-600",children:a?.email})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 font-semibold",children:"Member Since"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 mt-1",children:new Date(a.created_at||Date.now()).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 font-semibold",children:"Active Listings"}),e.jsx("p",{className:"text-lg font-semibold text-green-600 mt-1",children:x.activeListings})]})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Verification Status"}),e.jsx(g,{className:"bg-blue-100 text-blue-800",children:"Not Verified (Coming Soon)"}),e.jsx("p",{className:"text-sm text-gray-700 mt-3",children:"Verify your account to increase buyer/renter confidence and visibility."})]}),e.jsx(o,{variant:"outline",className:"w-full justify-start text-red-600 border-red-200 hover:bg-red-50",children:"ðŸšª Sign Out"})]})})]}),e.jsx(B,{})]})}export{Q as default};
